<!doctype html>
<html>
<body>
<ul></ul>

<div id="container">
</div>

<script src="jquery.min.js"></script>
<script src="d3.min.js"></script>
<script>
let fieldNames = "number squared cubed fib".split(" ");
let data = [
[1, 1, 1, 1],
[2, 4, 8,1],
[3, 9, 27, 2],
[4, 16, 64, 3],
[5, 25, 125, 5]
];
makeList(fieldNames);

function makeList(data) {
let listUpdate = d3.select("ul").selectAll("li").data(data, d => d);
listUpdate.exit().remove();
listUpdate = listUpdate.enter().append("li").html(d => `<button>${d}</button>`).merge(listUpdate);
} // makeList

createTable ("#container", fieldNames, data);

function createTable (selector, fieldNames, data) {
  let updateRows = d3.select(selector)
    .append ("table")
.selectAll("tr")
    .data([fieldNames].concat(data));

updateRows.exit().remove();

updateRows = updateRows.enter().append ("tr");

let updateColumns = updateRows.selectAll ("td")
.data ((d,i,g) => {/*alert(`d: ${d}, i: ${i}, g: ${g}`);*/ g[0].classList.add("headers"); return d;});
  
updateColumns.exit().remove();

updateColumns = updateColumns.enter().append ((d,i,g) => {return g[i]._parent.classList.contains("headers")? document.createElement("th") : document.createElement("td");})
.text (d => d);
 } // createTable
</script>

</body>
</html>
