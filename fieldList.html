<!doctype html>
<html>
<meta charset="utf-8">
<title>Test</title>
<script src="http://code.jquery.com/jquery.min.js"></script>
<style>
.fields.list {list-style-type: none;}
[aria-pressed='true'] {border: solid green;}
#availableFields {float: left;}
#activeFields {float: right;}
</style>

</head>
<body>
<h1>Test</h1>

<div id="container">
<div role="region" aria-label="available fields" id="availableFields">
<button class="clear">Clear</button>
<ul class="fields list"></ul>
</div><div role="region" aria-label="active fields" id="activeFields">
<ul class="fields list"></ul>
</div>
</div><!-- .container -->

<hr>
<div id="message" aria-live="polite">
</div>

<script>
"use strict";
let fieldNames = "name, id, date, eMail, phone, address, active";
let fieldList = fieldNames.split(",").map(item => item.trim());
let $available = $("#availableFields .list");
let $active = $("#activeFields .list");

$available.append (createListItems (fieldList, "toggleButton"));

$available.on ("click", (e) => {
let $field = $(e.target);
togglePressed ($field);

$active.empty ()
.append (
createListItems ($("[aria-pressed='true']", $available).map((i,x) => x.textContent).get(), "button")
); // append
return false;
}); // click on $available

$("#activeFields .list").on ("click", (e) => {
// are any pressed
let $pressed = $("#activeFields [aria-pressed='true']");
if ($pressed.length === 0) {
$(e.target).attr("aria-pressed", "true");
} else if ($pressed.length === 1) {
move ($pressed, $(e.target));
$pressed.removeAttr ("aria-pressed");
} // if
return;

function move ($from, $to) {
$from.insertBefore ($to);
} // move
}); // click on $active

function togglePressed ($button) {
$button.attr ("aria-pressed",
$button.attr("aria-pressed") === "true"? "false" : "true"
);
} // togglePressed

function clearPressed ($buttons) {
$buttons.attr ("aria-pressed", "false");
} // clearPressed

function createListItems (list, type) {
let $listItems = $();
if (type === "button") {
list.forEach ((item, index) => $listItems = $listItems.add (`<li><button>
${item}
</button></li>`));

} else if (type === "toggleButton") {
list.forEach ((item, index) => $listItems = $listItems.add (`<li><button aria-pressed="false">
${item}
</button></li>`));

} else if (type === "radio" || type === "checkbox") {
list.forEach ((item, index) => $listItems = $listItems.add (`<li><label>
${item} <input type="${type}" value="${index}"></label>
</li>`));

} else {
list.forEach (item => $listItems = $listItems.add (`<li>${item}</li>`));
} // if

return $listItems;
} // createListItems


function getChecked ($list) {
return $list.find("input").get().filter (x => x.checked).map (item => item.value);
} // getChecked

function getPressed ($list, indexes) {
return $list.find("button[aria-pressed='true']").get()
.map ((item, index) => indexes? index : item.textContent);
} // getPressed

function message (text) {
$("#message").text (text);
} // message

</script>

</body>
</html>
