<!doctype html>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>test</title>

<style>
.selected::before {content: "selected: ";}
</style>
</head>
<body>
<h1>Reorder</h1>

<div role="status" id="status"></div>

<fieldset><legend><h2>Reorder - html list</h2></legend>
<ul id="list1">
<li>thing 3</li>
<li>thing 2</li>
<li>thing 1</li>
</ul>

</fieldset>

<fieldset><legend><h2>Reorder - html select list</h2></legend>
<select id="list2">
<option>thing 3</option>
<option>thing 2</option>
<option>thing 1</option>
</select>

</fieldset>

<script>
const list1 = document.querySelector("#list1");
const list2 = document.querySelector("#list2");

list1.addEventListener("click", reorderHtmlList);
list2.addEventListener("click", reorderSelectList);

function reorderHtmlList (e) {
const item = e.target;
const list = item.parentElement;
const selected = getSelected(list);

if (item === selected) {
unselectAll(list);
statusMessage(`${item.textContent} unselected`);

} else if (not(selected)) {
unselectAll(list);
pickUp(item);

} else {
drop(selected, item);
} // if

function getSelected (list) {
return list.querySelector(".selected");
} // getSelected

function unselectAll (list) {
list.querySelectorAll(".selected").forEach(x => x.classList.remove("selected"));
} // unselectAll

function pickUp (item) {
unselectAll(list);
item.classList.add("selected");
statusMessage(`picked up ${item.textContent}`);
} // pickUp

function drop (selected, item) {
insert(selected, item);
statusMessage(`drop ${selected.textContent}`);
} // drop

function insert (element, item) {
if (element === item) return;
element.remove();
item.insertAdjacentElement("beforeBegin", element);
unselectAll(list);
statusMessage(`${element.textContent} inserted before ${item.textContent}`);
} // insert
} // reorderHtmlList

function reorderSelectList (e) {

} // reorderSelectList

function statusMessage (text) {
document.querySelector("#status").textContent = text;
} // statusMessage

function not (x) {return !x;}

</script>

</body>
</html>
